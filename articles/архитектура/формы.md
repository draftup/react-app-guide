# Формы для ввода данных

В этой статье описана разработка форм ввода на React.

## Тип значений и сопровождающие утилиты

```js

type PersonFormValues = {
    name: string;
};

```

```js

const createPersonFormValues = (): Person => ({
    name: ''
});

```

## Тип нарушений и сопровождающие утилиты

```js

type Violation__EmptyName = {
    type: 'EmptyName';
}

type Violation__ShortName = {
    type: 'ShortName';
}

type PersonFormViolation = Violation__EmptyName | Violation__ShortName;

```

```js

const validatePersonFormValues = (values: PersonFormValues) => {
    const violations: PersonFormViolation[] = [];

    if (!values.name) {
        violations.push({
            type: 'EmptyName'
        })
    }

    if (values.name.length < NAME_MIN_LENGTH) {
        violations.push({
            type: 'ShortName'
        })
    }

    return violations;
}

```

## Реализация через локальное состояние

```jsx

const usePersonForm = () => {
    const [values, setValues] = React.useState<PersonFormValues>(createPersonFormValues);

    const [violations, setViolations] = React.useState<PersonFormViolation[]>([]);

    const setName = (nextValue: string) => {
        setValues(prevValues => ({
            ...prevValues,
            name: nextValue
        }))
    }

    React.useEffect(() => {
        setViolations(validatePersonFormValues(values))
    },[values])

    return { values, violations, setName }
}

```

## Реализация через глобальное состояние

TODO

## Подключение к пользовательскому интерфейсу

```jsx

const PersonForm = () => {
    const { values, violations, setName } = usePersonForm();

    const handleNameInputChange = (event) => {
        setName(event.target.value)
    }

    const handleSubmit = () => {
        if (violations.length === 0) {
            submitPersonForm({ values })
        }
    }

    const nameHint = selectNameViolationHint(violations)

    return(
        <form onSubmit={handleSubmit}>
            <label>
                Имя
                <br />
                <input
                    type="text"
                    name="name"
                    placeholder="Введите имя"
                    value={values.name}
                    onChange={handleNameInputChange}
                />
                <br />
                {nameHint && (
                    <small>{nameHint}</small>
                )}
            </label>
            <button type="submit">
                Отправить
            </button>
        </form>
    )    
}

```

## Отправка формы